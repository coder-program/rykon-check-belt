# Railway Build Configuration - APENAS BACKEND
# Last updated: 2026-01-23 22:15 - Restart forced
[build]
  builder = "nixpacks"
  buildCommand = "cd backend && npm install && npm run build"

[deploy]
  startCommand = "cd backend && npm run start:prod"
  healthcheckPath = "/api/health"
  healthcheckTimeout = 100
  restartPolicyType = "ON_FAILURE"
  restartPolicyMaxRetries = 10
  
[variables]
  NODE_ENV = "production"
  DB_HOST = "200.98.72.161"
  DB_PORT = "5432"
  DB_NAME = "teamcruz_db"
  DB_USER = "teamcruz_app"
  DB_PASS = "TeamCruz2024@Secure!"
  DB_SCHEMA = "teamcruz"
  JWT_SECRET = "jwt_secret_muito_forte_para_producao_123456789"
  JWT_EXPIRES_IN = "8h"
  PORT = "3000"
  CORS_ORIGIN = "https://rykon-check-belt.vercel.app,https://teamcruz.rykonfit.com.br,http://localhost:3000,http://localhost"
  LOG_LEVEL = "info"
  SMTP_HOST = "smtp.gmail.com"
  SMTP_PORT = "587"
  SMTP_USER = "techrykon@gmail.com"
  SMTP_PASS = "pdurdvdjnkrfekph"
  SUPPORT_EMAIL = "techrykon@gmail.com"
  FRONTEND_URL = "https://rykon-check-belt.vercel.app"
  TWILIO_ACCOUNT_SID = "L62ADE8QM222W58LTDQQ9SZV"
  TWILIO_AUTH_TOKEN = "seu_auth_token_aqui"
  TWILIO_WHATSAPP_NUMBER = "whatsapp:+5511960656955"